<html>
  <head>
    <meta charset="utf-8">
    <title></title>

    <style>
    button {
        width: 100%;
        height: 50%;
    }
    </style>

  </head>
  <body>
    <textarea id="output_area" style="width:100%; height:50%"></textarea>
    <button>Multiply</button>

    <script>
      function output(text) {
        document.getElementById("output_area").append(text.toString() + "\n\n");
      }

      var button = document.getElementsByTagName("button")[0];

      var Module = {
        'print': function (text) { output("print\n" + text); },
        'printErr': function (text) { output("printErr\n" + text); },

        // all my code is in here
        'onRuntimeInitialized': function() {
        	button.addEventListener("click", (e) => {
        		// get mouse x, y
        		mouseX = e.clientX;
        		mouseY = e.clientY;
        		// call multiply with x, y
        		product = Module.ccall(
        			'multiply',
        			'number',
        			[ 'number', 'number' ],
        			[mouseX, mouseY]
        		);
        		output(mouseX + " * " + mouseY + " = " + product);
        	});
        } // /onRuntimeInitialized

      }; // /Module

      // testing with an early click
      console.log("[ + ] Testing with an early click!");
      button.click();
    </script>

    <script src="multiply.js"></script>
  </body>
</html>
